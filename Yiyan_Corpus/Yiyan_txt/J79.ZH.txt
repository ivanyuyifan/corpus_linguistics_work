第3章 运动学
3.1 简介本章详细讨论并联机器人的运动学分析。
运动学分析涉及机器人运动几何关系的研究，不考虑引起运动的力和力矩。
本章推导和分析了机械臂几何参数与运动平台的最终运动之间的关系。
并联机器人是一个有大量闭环运动链的机械装置，它的运动平台通过几个独立的运动链连接到基座。
上述并联机器人的定义被广泛接受和使用，它包括冗余并联机械臂和受限并联机械臂，冗余机械臂驱动器的个数要比它受控自由度的个数多。
当运动链的个数和运动平台的自由度个数相同时，这种并联机器人称为全并联机器人。
除这个条件外，如果并联机器人的各个支撑臂上的关节类型和数量都一样，且可驱动关节的数量和类型也都一样，则称这样的并联机器人是对称的。
由于对称并联机械臂的运动学分析更为方便，因此许多工业机器人都采用这种结构，比如Stewart-Gough机械臂或Delta机器人。
完全并联机械臂主要有三种类型。
平面机器人在平面上有两个平移自由度和一个旋转自由度，空间方位机械臂在空间内有三个旋转自由度，而一般的空间机器人有三个平移自由度和三个旋转自由度。
图3-1展示了一个对称平面机器人，它臂上的三个旋转关节有完全一致的结构，这种机器人被称作3RRR机械臂。
本书约定加下划线的关节特指可驱动关节。
图3-32展示了一个类似图3-1机械臂的冗余机械臂RRR，它的第一个旋转关节是可驱动关节。
图1-7所展示的机械臂是另一个平面机器人。
这个机械臂是一个有4RPR结构的冗余机械臂，这意味着它使用了一个RPR形式的对称臂结构，而且它的移动关节是可驱动的。
图3-1一个对称的平面并联机器人
如图3-33和图3-10为空间方位机械臂的例子，前一个机械臂是完全并联的三自由度机械臂，后者是一个冗余并联机械臂。
这两个机械臂都是为运动平台提供一个纯方位运动而设计的。
图3-33所示的并联机械臂包括两个四面体，通过球形关节彼此连接，这样限制了运动平台的三个旋转自由度。
这个机械臂的臂是SPS结构，其中移动关节是可驱动的。
同样的，图3-10所示的液压驱动的肩机械臂是一个冗余机械臂，其中一根被动连杆通过一个球形关节（S6）连接到基座，它使运动平台的运动被限制到只有三个旋转自由度。
然而在该机器人上，采用了完全一致的4个UPU结构的臂以构成冗余的并联机器人。
本书中，给出了冗余的平面机械臂和冗余的空间方位机械臂详尽的运动学分析，而完全并联机械臂则作为习题留给读者进行分析。 
完全的并联六自由度机械臂的分析也适用于SGP（Stewart-Gough平台）。
这种机械臂包括完全一致的六个SPS结构的臂。
虽然许多研究人员都研究过SGP的最一般形式的运动学分析并获得了很多出色的成果，但本书还是选择了被称作6-6p SGP的特殊几何结构的SGP封闭形式解。
这主要是由于机械臂的正向运动学的解析解易于处理，并且相比其他结构更易被读者接受。
图3-18展示了6-6p SGP结构的原理图。
我们知道，和串联机器人不同，并联机器人的逆运动学分析通常更简单、更直接。
在大多数情况下，给定运动平台的位姿，臂的相关变量可以独立计算，并且即使是针对冗余机械臂，多数情况下这些变量的解也是唯一确定的。
然而，并联机器人的正向运动学计算一般是很复杂的，而且它的解通常包含着相互耦合的非线性方程组，通常得不到封闭形式的解和唯一的解。
本书针对通用情形和特殊情形，给出了解决此问题的不同求解方法。
通常情况下，并联机械臂的正向运动学问题的不同解可以使用数值方法或分析方法得到。
在下文中，给出了一个进行并联机械臂运动学分析系统的方法，并且选择了上文提到的三个案例进行研究，检验了这种方法的有效性。
3.2 封闭环方法
如图3-2所示，一个典型的并联机械臂包括两个主要的部分。
A部分称作基座，一般设计成固定的，B部分设计成可移动的，称作运动平台，有时也称作末端执行器材。
这两部分是通过n个臂连接成的，每个臂连接到点Ai和点Bi两个点上，这两个点分别称作臂上的固定连接点和移动连接点。
在位移方面，正向运动学问题就是通过一组关节位置的测量值确定运动平台相对于基座的确切位置或姿态。
在速度方面，正向运动学问题涉及从一组关节速度的测量值和已知的结构确定实际的扭转速度，即运动平台相对基座的平移速度和角速度。
由于并联机械臂的特性通常能弥补串联结构的不足，因此它常用于串联机械臂不能满足应用需求的场合。
然而，不论是在位移方面还是速度方面，并联机械结构复杂程度越高，正向运动学问题越有挑战性。
正向运动学的复杂程度取决于机器人架构的广泛性、几何结构和关节传感器的布置。
图3-2 一个一般并联机械臂的向量封闭环结构
为描述运动平台相对基座的运动，将坐标系{A}附在主体A上，坐标系{B}附在主体B上，如图3-2所示。
运动平台相对于基座的姿态是这样定义的，通过一个位置向量p和一个旋转矩阵R，p表示{B}的原点相对于坐标系{A}的位置向量。另外，{B}相对于{A}的方位通过一个3X3的旋转矩阵R来表示。
并联机械臂的每个臂定义一个运动环，它通过坐标系{A}和{B}的原点，也通过两个臂的连接点Ai和Bi。
在位移方面，每个运动封闭环可以通过向量形式表示为：. . .. . .和. . .很容易通过基座和运动平台的连接点的几何结构得到。
我们定义固定坐标系{A}中的向量ai=. . .和移动坐标系{B}中的向量bi=. . .。
另外，qi=. . .定义为臂的变量，它表明了臂的几何结构，而且通常包含了主动和被动的臂分支。
因此，闭环可以写成未知的位姿变量P和R，以及描述基座和运动平台几何的位置向量ai和bi，此外，臂向量qi只要有臂的运动学方程和固定在臂的不同关节上的位置传感器的测量值就可以得到。
因此，我们可以得到封闭环方程如下所示：. . .
这些方程是运动学分析的主体部分。
逆运动学问题是首先假定运动平台位置向量p和方位向量R是给定的，然后求解对应的主动臂的变量。
因此，从上面的方程发现，必须消除被动臂变量才能求解逆运动学问题。
上述这些分析通常是很简单的，并且即使是针对冗余的并联机械臂，一般也存在臂变量的唯一解。
然而，逆运动学求解则不是很简单的，并且通常正向运动方程的解也需要通过数值方法得到。
在接下来的部分中，将详细阐述三个例子的逆向和正向运动学分析。
3.3 并联机器人的运动学分析
在本节中，将详细讨论平面并联机械臂的运动学。
本节分析中首先描述机械运动结构，然后详细说明机械臂的运动关系。
接着，详细讨论机械臂的逆向和正向运动学分析。
为了验证这些公式，在3.3.5节，呈现了机械臂逆向运动学和正向运动学计算的仿真结果，而且还验证了正向运动学数值解的精度。
3.3.1 机械机构描述
本节讨论如图3-3所示的平面4RPR并联机械臂的体系结构。
这种机械臂的运动平台由4个运动学结构完全一致的臂支撑。
每个臂依次由一个旋转关节（R），一个可驱动的移动关节（P）和另一个旋转关节（R）组成，将固定基座和机器人的运动平台连在一起。
因此，机械臂的整体结构式为4RPR。臂上的移动关节具有一个活塞一气缸驱动器或一个缆线驱动器等，由移动关节的运动学结构建模。
为了避免机械臂中心位置的奇异性，这些臂设计成交叉的。
完整的机械结构奇异性分析将在4.6.2节介绍。
图3-3 一个4RPR并联机械臂的体系结构
如图3-3所示，Ai表示臂的固定基点，Bi表示各臂与运动平台的连接点，Li表示臂的长度，ai表示臂的角度。
运动平台G的中心位置被表示为G = [xG，yG]，机械臂运动平台的方位用相对于固定坐标坐标系的角度. . .表示。
因此机械臂拥有三个自由度X = [xG， yG， . . .]，且具有四个驱动器，且驱动器还有一个冗余度。
3.3.2 机械臂的几何结构
如图3-4所示，为进行分析，在固定基座上建立一个固定的坐标系O：xy，坐标原点选择为O点，O点是过基点Ai的圆的圆心。
另外，在机械臂运动平台的圆心点G上建立另一个运动坐标系G：UV。
进一步，当机械臂处于中心位置时，假设在xy平面上，点Ai离点O的径向距离是RA，点Bi离点G的径向距离是RB。
图3-4 4RPR平面机械臂的运动学结构
为了说明机械臂的几何结构，当运动平台处于中心位置时，我们定义机械臂结构的点Ai和点Bi相对于固定坐标系O的绝对角度是. . .和. . .。
Bi的瞬时方位角被定义为：. . .
因此，对于每个臂，i=1，2，3，4，基点Ai的位置可表示为：. . .
3.3.3 逆向运动学
假设运动平台的位置和方位X = [xG，yG，. . .] T是给定的，逆向运动学分析的问题是求取机械臂对应的关节变量L = [L1，L2，L3，L4]T。
如图3-4所阐述的机械臂几何结构，每个臂的封闭环方程可以写为：. . .其中，i=1，2，3，4。